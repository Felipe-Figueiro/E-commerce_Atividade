<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECOMMERCE</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


</head>

<body>

    <header class="header">
        <a href="index.html"><span class="material-symbols-outlined">home</span></a>
        <a href="dados.html"><span class="material-symbols-outlined">bar_chart</span></a>
        <a href="about.html"><span class="material-symbols-outlined">Beenhere</span></a>
        <span class="material-symbols-outlined" style="font-variation-settings: 'FILL' 1">shopping_basket</span>
    </header>
    <div style="margin-top: 50px;">
        <h2>Nossos pordutos e avaliações</h2>
        <canvas id="grafico"></canvas>
        <br>
    </div>
    <section style="text-align: center;">
    </section>
    <footer class="footer" style="position: fixed;">
        <p>Todos direitos reservados</p>

    </footer>
    <script src="script.js"></script>


    <script>
        /** API PARA GRAFICOS DE DADOS */
        async function carregadados() {
            //faz uma requisição a api
            const resposta = await fetch("https://dummyjson.com/products");
            // converte os dados de texto para obj
            const dados = await resposta.json();
            //pega o titulo em array(map) e nomeia para nomes
            const nome = dados.products.map(p => p.title);
            //pega as avaliações também em array e nomeia como aval
            const aval = dados.products.map(p => p.rating);
            /***************/

            //monta o gráfico
            new Chart(document.getElementById("grafico"), {
                type: 'bar',
                //geração dos itens dos graficos
                data: {
                    labels: nome, aval,
                    datasets: [{
                        label: "Avaliação",
                        data: aval,
                        backgroundColor: "rgba(0,162,0, 0.6)",
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 5
                        }
                    }
                }
            });
        }
        carregadados();      
    </script>
</body>

</html>